<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <link rel="icon" type="image/x-icon" href="/favicon.ico">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PG Plaisio - Pricing</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css">
    <link rel="stylesheet" href="styles/main.css">
</head>

<body class="bg-light">

    <!-- Desktop Sidebar -->
    <div id="sidebar" class="sidebar d-none d-md-flex flex-column">
        <button class="btn btn-light mb-3" id="toggleBtn">
            <i class="bi bi-list"></i>
        </button>
        <a href="/" class="nav-link"><i class="bi bi-house"></i> Home</a>
        <a href="/wholesale.html" class="nav-link"><i class="bi bi-box"></i> Wholesale</a>
        <a href="/stampless.html" class="nav-link"><i class="bi bi-file"></i> Stampless</a>
        <a href="/wholesaleplus.html" class="nav-link"><i class="bi bi-box-seam"></i> Wholesale+</a>
        <a href="/retail.html" class="nav-link"><i class="bi bi-file-earmark-easel"></i> Retail</a>
        <a href="/posters.html" class="nav-link"><i class="bi bi-image"></i> Posters</a>
        <a href="/frames.html" class="nav-link"><i class="bi bi-border-outer"></i> Frames</a>
        <a href="/artworks.html" class="nav-link"><i class="bi bi-palette"></i> Artworks</a>
    </div>

    <!-- Top Navbar (mobilde görünsün) -->
    <nav class="navbar navbar-light bg-light d-md-none">
        <div class="container-fluid">
            <button class="btn btn-outline-secondary" type="button" data-bs-toggle="offcanvas"
                data-bs-target="#mobileMenu">
                <i class="bi bi-list"></i>
            </button>
            <span class="navbar-brand mb-0 h1">PG Plaisio - Wholesale</span>
        </div>
    </nav>

    <!-- Offcanvas Sidebar (mobil menü) -->
    <div class="offcanvas offcanvas-start" tabindex="-1" id="mobileMenu">
        <div class="offcanvas-header">
            <h5 class="offcanvas-title">Menu</h5>
            <button type="button" class="btn-close" data-bs-dismiss="offcanvas"></button>
        </div>
        <div class="offcanvas-body">
            <a href="/" class="nav-link mb-2"><i class="bi bi-house me-2"></i> Home</a>
            <a href="/wholesale.html" class="nav-link mb-2"><i class="bi bi-box me-2"></i> Wholesale</a>
            <a href="/stampless.html" class="nav-link mb-2"><i class="bi bi-file me-2"></i> Stampless</a>
            <a href="/wholesaleplus.html" class="nav-link mb-2"><i class="bi bi-box-seam me-2"></i> Wholesale+</a>
            <a href="/retail.html" class="nav-link mb-2"><i class="bi bi-file-earmark-easel me-2"></i> Retail</a>
            <a href="/posters.html" class="nav-link mb-2"><i class="bi bi-image me-2"></i> Posters</a>
            <a href="/frames.html" class="nav-link mb-2"><i class="bi bi-border-outer me-2"></i> Frames</a>
            <a href="/artworks.html" class="nav-link mb-2"><i class="bi bi-palette me-2"></i> Artworks</a>
        </div>
    </div>

    <!-- Content -->
    <div id="content" class="content">
        <h3>Wholesale</h3>
        <div class="row">
            <!-- Left: Form -->
            <div class="col-md-10 mb-4">
                <div class="card shadow">
                    <div class="card-body">
                        <h5 class="card-title">Frame Specifications</h5>
                        <hr>
                        <form class="needs-validation" novalidate>

                            <div class="row">
                                <!-- Frame -->
                                <div class="col-md-6 g-3">
                                    <label class="form-label" for="frame-select">ΚΟΡΝΙΖΑ</label>
                                    <select class="form-select" id="frame-select" required>
                                    </select>
                                    <div class="d-flex flex-row gap-5">
                                        <small><span class="fw-semibold">Τιμή μονάδας :</span><span
                                                id="frame-unit-price"></span>€</small>
                                        <small><span class="fw-semibold">Μέτρο : </span><span
                                                id="frame-unit"></span>m</small>
                                    </div>
                                    <div class="invalid-feedback">
                                        Please select
                                    </div>
                                </div>
                                <div class="col-md-6 g-3">
                                    <!-- Secondary Frame -->
                                    <label class="form-label" for="second-frame-select">ΠΑΤΟΥΡΑ</label>
                                    <select class="form-select" id="second-frame-select" required>
                                    </select>
                                    <div class="d-flex flex-row gap-5">
                                        <small><span class="fw-semibold">Τιμή μονάδας :</span><span
                                                id="second-frame-unit-price"></span>€</small>
                                        <small><span class="fw-semibold">Μέτρο : </span><span
                                                id="second-frame-unit"></span>m</small>
                                    </div>
                                    <div class="invalid-feedback">
                                        Please select
                                    </div>
                                </div>
                            </div>

                            <div class="row">
                                <!-- Height -->
                                <div class="col-md-6 g-3">
                                    <label for="height-input" class="form-label">ΥΨΟΣ</label>
                                    <div class="input-group">
                                        <input type="number" class="form-control" id="height-input" value="0" min="0"
                                            step="1" data-type="decimal" required>
                                        <span class="input-group-text">cm</span>
                                    </div>
                                    <div class="invalid-feedback">
                                        Please enter a valid number.
                                    </div>
                                </div>

                                <!-- Width -->
                                <div class="col-md-6 g-3">
                                    <label for="width-input" class="form-label">ΠΛΑΤΟΣ</label>
                                    <div class="input-group">
                                        <input type="number" class="form-control" id="width-input" value="0" min="0"
                                            step="1" data-type="decimal" required>
                                        <span class="input-group-text">cm</span>
                                    </div>
                                    <div class="invalid-feedback">
                                        Please enter a valid number.
                                    </div>
                                </div>
                            </div>


                            <div class="row">
                                <!-- Outer Measurement -->
                                <div class="col-md-6 g-3">
                                    <label class="form-label" for="outer-measure-select">ΕΞΩΤΕΡΙΚΑ</label>
                                    <select class="form-select" id="outer-measure-select" required>
                                        <option disabled selected value="0">OXI</option>
                                        <option value="1">NAI</option>
                                    </select>
                                    <div class="invalid-feedback">
                                        Please select
                                    </div>
                                </div>

                                <!-- Back Panel (Glass) -->
                                <div class="col-md-6 g-3">
                                    <label class="form-label" for="back-panel-select">ΤΖΑΜΙ-ΠΛΑΤΗ</label>
                                    <select class="form-select" id="back-panel-select" required>
                                    </select>
                                    <div class="invalid-feedback">
                                        Please select
                                    </div>
                                </div>
                            </div>

                            <div class="row">
                                <!-- Extra Back Frame -->
                                <div class="col-md-6 g-3">
                                    <label class="form-label" for="extra-back-frame-select">ΕΠΙΤΡΑΠΕΖΙΑ ΠΛΑΤΗ</label>
                                    <select class="form-select" id="extra-back-frame-select" required>
                                    </select>
                                    <div class="invalid-feedback">
                                        Please select
                                    </div>
                                </div>

                                <!-- Mirror -->
                                <div class="col-md-6 g-3">
                                    <label class="form-label" for="mirror-select">ΚΑΘΡΕΠΤΗΣ</label>
                                    <select class="form-select" id="mirror-select" required>
                                    </select>
                                    <div class="invalid-feedback">
                                        Please select
                                    </div>
                                </div>
                            </div>

                            <!-- Passepartouts -->
                            <div class="row">
                                <div class="col-md-6 g-3">
                                    <label class="form-label" for="passepartout-select">ΠΑΣΠΑΡΤΟΥ</label>
                                    <select class="form-select" id="passepartout-select" required>
                                    </select>
                                    <div class="invalid-feedback">
                                        Please select
                                    </div>
                                </div>

                                <!-- Extra Service -->
                                <div class="col-md-6 g-3">
                                    <label class="form-label" for="extra-service-select">ΕΡΓΑΣΙΕΣ</label>
                                    <select class="form-select" id="extra-service-select" required>
                                    </select>
                                    <div class="invalid-feedback">
                                        Please select
                                    </div>
                                </div>
                            </div>

                            <div class="row">
                                <!-- Backing board Type -->
                                <div class="col-md-6 g-3">
                                    <label class="form-label" for="back-board-type-select">ΤΥΠΟΣ ΚΟΝΤΡΑΣ</label>
                                    <select class="form-select" id="back-board-type-select" required>
                                    </select>
                                    <div class="invalid-feedback">
                                        Please select
                                    </div>
                                </div>

                                <!-- Backing board measurements -->
                                <div class="col-md-6 g-3">
                                    <label for="back-board-length-input" class="form-label">ΜΕΤΡΑ ΚΟΝΤΡΑΣ</label>
                                    <div class="input-group">
                                        <input type="number" class="form-control" id="back-board-length-input" value="0"
                                            data-type="integer" required>
                                        <span class="input-group-text">m</span>
                                    </div>
                                    <div class="invalid-feedback">
                                        Please enter a valid number.
                                    </div>
                                </div>
                            </div>

                            <div class="row">
                                <!-- Printing -->
                                <div class="col-md-6 g-3">
                                    <label class="form-label" for="printing-select">ΕΚΤΥΠΩΣΗ</label>
                                    <select class="form-select" id="printing-select" required>
                                        <option disabled selected value>OXI</option>
                                        <option value="1">ΧΑΡΤΙ</option>
                                        <option value="2">ΚΑΜΒΑΣ ΠΟΛΥΕΣΤΕΡΙΚΟΣ</option>
                                        <option value="3">ΚΑΜΒΑΣ ΒΑΜΒΑΚΕΡΟΣ</option>
                                    </select>
                                    <div class="invalid-feedback">
                                        Please select
                                    </div>
                                </div>

                                <!-- Artwork -->
                                <div class="col-md-6 g-3">
                                    <label class="form-label" for="artwork-select">Artworks</label>
                                    <select class="form-select" id="artwork-select" required>
                                    </select>
                                    <div class="invalid-feedback">
                                        Please select
                                    </div>
                                </div>
                            </div>

                            <div class="row">
                                <!-- Stretchen -->
                                <div class="col-md-6 g-3">
                                    <label class="form-label" for="strecthen-select">ΤΕΛΑΡΩΜΑ</label>
                                    <select class="form-select" id="strecthen-select" required>
                                    </select>
                                    <p id="statusMessage" class="mt-3"></p>
                                    <div class="invalid-feedback">
                                        Please select
                                    </div>
                                </div>
                            </div>
                        </form>
                    </div>
                </div>
            </div>

            <!-- Right : Price Summary -->
            <div class="col-md-2">
                <div class="card shadow">
                    <div class="card-body">
                        <h6 class="card-title">Price Summary</h6>
                        <hr>
                        <!-- net price -->
                        <div class="row">
                            <div class="col-6">ΚΑΘΑΡΗ ΤΙΜΗ:</div>
                            <div class="col-6 text-end">
                                <span class="text-muted" id="net-price-label">0</span>
                                <span>€</span>
                            </div>
                        </div>
                        <!-- discount -->
                        <div class="row">
                            <div class="col-6">ΕΚΠΤΩΣΗ:</div>
                            <div class="col-6 text-end">
                                <span class="text-muted" id="discount-label">0</span>
                                <span>€</span>
                            </div>
                        </div>
                        <hr>
                        <!-- price after discount -->
                        <div class="row">
                            <div class="col-6">ΤΙΜΗ ΜΕΤΑ ΕΚΠΤΩΣΗΣ:</div>
                            <div class="col-6 text-end">
                                <span class="text-muted" id="after-discount-label">0</span>
                                <span>€</span>
                            </div>
                        </div>
                        <!-- vat -->
                        <div class="row">
                            <div class="col-6">ΦΠΑ:</div>
                            <div class="col-6 text-end">
                                <span class="text-muted" id="vat-label">0</span>
                                <span>€</span>
                            </div>
                        </div>

                        <hr>
                        <!-- total with vat -->
                        <div class="row">
                            <div class="col-6">
                                <h6>ΣΥΝΟΛΟ ΜΕ ΦΠΑ:</h6>
                            </div>
                            <div class="col-6 text-end">
                                <span class="text-muted" id="total-with-vat-label">0</span>
                                <span>€</span>
                            </div>
                        </div>

                        <hr>

                        <!-- cost breakdown -->
                        <h6>Cost Breakdown</h6>

                        <!-- frame price -->
                        <div class="row">
                            <div class="col-6">ΤΙΜΗ ΚΟΡΝΙΖΑΣ:</div>
                            <div class="col-6 text-end">
                                <span class="text-muted" id="frame-price-label">0</span>
                                <span>€</span>
                            </div>
                        </div>

                        <!-- rebate price -->
                        <div class="row">
                            <div class="col-6">ΤΙΜΗ ΠΑΤΟΥΡΑΣ:</div>
                            <div class="col-6 text-end">
                                <span class="text-muted" id="rebate-price-label">0</span>
                                <span>€</span>
                            </div>
                        </div>

                        <!-- back glass price -->
                        <div class="row">
                            <div class="col-6">ΤΙΜΗ ΤΖΑΜΙ-ΠΛΑΤΗ:</div>
                            <div class="col-6 text-end">
                                <span class="text-muted" id="back-glass-price-label">0</span>
                                <span>€</span>
                            </div>
                        </div>

                        <!-- passapartouts price -->
                        <div class="row">
                            <div class="col-6">ΠΑΣΠΑΡΤΟΥ:</div>
                            <div class="col-6 text-end">
                                <span class="text-muted" id="passapartout-price-label">0</span>
                                <span>€</span>
                            </div>
                        </div>

                        <!-- labor price -->
                        <div class="row">
                            <div class="col-6">ΚΟΣΤΟΣ ΕΡΓΑΣΙΑΣ:</div>
                            <div class="col-6 text-end">
                                <span class="text-muted" id="labor-price-label">0</span>
                                <span>€</span>
                            </div>
                        </div>

                        <!-- mirror price -->
                        <div class="row">
                            <div class="col-6">ΚΑΘΡΕΠΤΗΣ:</div>
                            <div class="col-6 text-end">
                                <span class="text-muted" id="mirror-price-label">0</span>
                                <span>€</span>
                            </div>
                        </div>

                        <!-- Stretching price -->
                        <div class="row">
                            <div class="col-6">ΤΕΛΑΡΩΜΑ:</div>
                            <div class="col-6 text-end">
                                <span class="text-muted" id="stretching-price-label">0</span>
                                <span>€</span>
                            </div>
                        </div>

                        <!-- printing price -->
                        <div class="row">
                            <div class="col-6">ΕΚΤΥΠΩΣΗ:</div>
                            <div class="col-6 text-end">
                                <span class="text-muted" id="printing-price-label">0</span>
                                <span>€</span>
                            </div>
                        </div>

                        <!-- artworks price -->
                        <div class="row">
                            <div class="col-6">ARTWORKS:</div>
                            <div class="col-6 text-end">
                                <span class="text-muted" id="artworks-price-label">0</span>
                                <span>€</span>
                            </div>
                        </div>

                        <div class="row mt-3">
                            <div class="col-6">
                                <button type="button" class="btn btn-danger pt-10" id="clear-button"><i
                                        class="bi bi-x-lg"></i>&nbsp;Clear</button>
                            </div>
                            <div class="col-6">
                                <select class="form-select text-end" id="discount-select" required>
                                    <option selected value="0">0%</option>
                                    <option value="5">5%</option>
                                    <option value="10">10%</option>
                                    <option value="10">15%</option>
                                    <option value="10">20%</option>
                                    <option value="10">25%</option>
                                    <option value="10">30%</option>
                                    <option value="10">35%</option>
                                    <option value="10">40%</option>
                                    <option value="10">45%</option>
                                    <option value="10">50%</option>
                                </select>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
    <script src="scripts/app.js"></script>
    <script src="scripts/datahelper.js"></script>
    <script src="scripts/framehelper.js"></script>

    <script>

        const priceSource = 'wholesale';
        let framePricesData = null;
        let backPanelGlasses = null;
        let extraBackFrames = null;
        let mirrors = null;
        let paspartouts = null;
        let extraServices = null;
        let backingBoardTypes = null;
        let artworkPrices = null;
        let strecthes = null;

        let selectedFrameData = null;
        let selectedSecondFrameData = null;

        const form = document.getElementsByClassName('needs-validation')[0];

        // Get a reference to the input element and the span element
        const frameSelect = document.getElementById('frame-select');
        const frameUnitPrice = document.getElementById('frame-unit-price');
        const frameUnit = document.getElementById('frame-unit');

        const secondFrameSelect = document.getElementById('second-frame-select');
        const secondFrameUnitPrice = document.getElementById('second-frame-unit-price');
        const secondFrameUnit = document.getElementById('second-frame-unit');

        //const secondFrameInput = document.getElementById('second-frame-input');
        //const netPriceLabel = document.getElementById('net-price-label');

        // Function to calculate the square of a number and update the span
        function calculateAndDisplaySquare() {
            // Get the value from the input field
            const inputValue = frameInput.value;

            if (!form.checkValidity()) {
                form.classList.add('was-validated');
                return;
            }

            if (!isNumber(frameInput)) {
                //alert('Please enter a valid number');
                return;
            }

            // Check if the input is a valid number
            if (inputValue !== '' && !isNaN(inputValue)) {
                // Convert the input value to a number
                const number = parseFloat(inputValue);

                // Calculate the square
                const square = number * number;

                // Display the result in the span element
                netPriceLabel.textContent = square;
            } else {
                // If the input is not a number, clear the span
                netPriceLabel.textContent = '0';
            }
        }

        // Attach the 'oninput' event listener to the input field
        // This runs the function every time the user types
        //frameInput.addEventListener('input', calculateAndDisplaySquare);

        form.addEventListener('input', (event) => {
            //calculateAndDisplaySquare();
            calculateFrameUnit();
            calculateSecondFrameUnit();
        });

        frameSelect.addEventListener('input', (event) => {
            findRowInData(
                framePricesData,
                0, event.target.value).then((data) => {
                    selectedFrameData = data;
                    frameUnitPrice.textContent = getFrameUnitPrice(priceSource);
                    //x" calculateFrameUnit();
                });
        });

        secondFrameSelect.addEventListener('input', (event) => {
            findRowInData(
                framePricesData,
                0, event.target.value).then((data) => {
                    selectedSecondFrameData = data;
                    secondFrameUnitPrice.textContent = getFrameUnitPrice(priceSource, true); // true means second frame
                    //calculateSecondFrameUnit();
                    //calculateFrameUnit();
                });
        });

        document.addEventListener('DOMContentLoaded', () => {

            // fetch the frame prices data and populate the select elements
            getAllRowsFromCsv('data-files/frame-prices.csv', ';').then((data) => {
                framePricesData = data;

                populateSelectFromData(
                    framePricesData,
                    document.getElementById('frame-select'),
                    "OXI", 0, 0, ';'
                );
                populateSelectFromData(
                    framePricesData,
                    document.getElementById('second-frame-select'),
                    "OXI", 0, 0, ';'
                );
            });

            // fetch back panel glasses and populate the select element
            getAllRowsFromCsv('data-files/back-panel-glasses.csv', ';').then((data) => {
                backPanelGlasses = data;

                populateSelectFromData(
                    backPanelGlasses,
                    document.getElementById('back-panel-select'),
                    "OXI", 0, 0, ';'
                );
            });

            // fetch extra back frames and populate the select element
            getAllRowsFromCsv('data-files/extra-back-frames.csv', ';').then((data) => {
                extraBackFrames = data;

                populateSelectFromData(
                    extraBackFrames,
                    document.getElementById('extra-back-frame-select'),
                    "OXI", 0, 0, ';'
                );
            });

            // fetch mirrors and populate the select element
            getAllRowsFromCsv('data-files/mirrors.csv', ';').then((data) => {
                mirrors = data;

                populateSelectFromData(
                    mirrors,
                    document.getElementById('mirror-select'),
                    "OXI", 0, 0, ';'
                );
            });

            // fetch paspartouts and populate the select element
            getAllRowsFromCsv('data-files/passepartouts.csv', ';').then((data) => {
                paspartouts = data;

                populateSelectFromData(
                    paspartouts,
                    document.getElementById('passepartout-select'),
                    "OXI", 0, 0, ';'
                );
            });

            // fetch extra services and populate the select element
            getAllRowsFromCsv('data-files/extra-services.csv', ';').then((data) => {
                extraServices = data;

                populateSelectFromData(
                    extraServices,
                    document.getElementById('extra-service-select'),
                    "OXI", 0, 0, ';'
                );
            });

            // fetch backing board types and populate the select element
            getAllRowsFromCsv('data-files/backing-board-types.csv', ';').then((data) => {
                backingBoardTypes = data;

                populateSelectFromData(
                    backingBoardTypes,
                    document.getElementById('back-board-type-select'),
                    "OXI", 0, 0, ';'
                );
            });

            // fetch artwork prices and populate the select element
            getAllRowsFromCsv('data-files/artwork-prices.csv', ';').then((data) => {
                artworkPrices = data;

                populateSelectFromData(
                    artworkPrices,
                    document.getElementById('artwork-select'),
                    "OXI", 0, 0, ';'
                );
            });

            // fetch stretchens and populate the select element
            getAllRowsFromCsv('data-files/stretchens.csv', ';').then((data) => {
                strecthes = data;

                populateSelectFromData(
                    strecthes,
                    document.getElementById('strecthen-select'),
                    "OXI", 0, 0, ';'
                );
            });
        });
    </script>
</body>

</html>